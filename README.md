# About
A collection of tools to process data from SILAC experiments analyzed in DIA mode.  

# Usage
This package contains modules that can be used to process the report.tsv generated by DIANN with SILAC settings. 
The pipeline module works by:
1) Filtering the report.tsv
2) Formatting the file so precursors contain H, M, and L channels, as well as using the MS1 translated values as intensities for each channel
3) Extracting protein level ratios results in a csv file containing protein groups rolled up from the precursor level
4) Calculating protein intensites either by stacking intensity channels and passing the precursors to directLFQ (https://github.com/MannLabs/directlfq) or by using a heavy reference to normalize intensities accross runs

The label check works by:
1) Extracting the highest heavy intensity from the MQ .txt files and locating the scan number
2) Accessing the .raw file is accessed (https://github.com/MannLabs) and the MS1 for data is accessed for plotting the scan

Adtitionally see example scripts (still in progress).

# Installation
Make a new env with conda 

conda create --name myenv python=3.8
conda activate myenv
navigate to folder where package was cloned to 
pip install . (this installs everything needed via setup.py) - some bugs with path to configs folder/json file. 

# DIANN Settings before beggining pipeline
Requires a report.tsv file generated by DIANN version 1.8.1 using the following SILAC settings (choose SILAC labels relevant for your experiment):

 Additional Options
--fixed-mod SILAC,0.0,KR,label
--lib-fixed-mod SILAC   
For Tripple SILAC: --channels SILAC,L,KR,0:0;SILAC,M,KR,4.0251069836:6.0201290267999;SILAC,H,KR,8.014199:10.008269   
For Double SILAC: --channels SILAC,L,KR,0:0;SILAC,H,KR,8.014199:10.008269   
--peak-translation   
--original-mods  
--no-norm   
--no-maxlfq   
--peak-center

Switch MBR off

Note: The filtering script contains a remove_contaminants() function that looks for a _cont suffix label on Protein.Groups, the report.tsv should be annotated in the following way or the function should be adjusted to filter out contaminants.

# Label check requirements
The label check module requires a thermo .raw file for the heavy spike-in aquired in DDA mode. After processing this file with MQ with requantify switched on, the resulting msms.txt and evidence.txt are used along with the .raw file to automate the label check and calculate labeling efficeincy (still in progress).
